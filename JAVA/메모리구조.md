## 자바 메모리 구조
![image](https://github.com/kihyyyun/TIL/assets/126649641/6e54ea39-7a2d-48e0-8529-a9134f102bc2)

* 메서드는 클래스 정보 보관한다
* 변수는 스택 영역에 생성 되고
* 객체는 힙 영역에 생성됨
  

### 메서드 영역
**메서드 영역에는 프로그램을 실행하는데 필요한 공통데이터를 관리한다** 클래스 정보, 런타임 상수풀, static변수등 이외 효율적으로 관리하기 위한 상수들을 관리한다.

### 스택 영역
**자바 실행시, 하나의 스택이 생성된다** 스택 프레임은 지역변수,중간 연산 결과 메서드 호출정보 등을 포함한다.
* 스택 프레임: 메서드 호출시 하나씩 쌓이고, 메서드가 종료되면 해당 프레임은 제거된다.

### 힙 영역
**객체와 배열이 생성되는 영역이다** 가비지컬렉션GC)이 이루어지는 주요 영역이며, 더 이상 참조되지 않는 객체는 GC에 의해 제거됨


### 스택과 큐 자료구조 

**스택 구조**
다음과 같은 블럭이 있다.

![image](https://github.com/kihyyyun/TIL/assets/126649641/85f15091-3643-4c7d-894e-80270e2542f1)

이블럭을 아래의 통에 넣는다고 생각해보자 한쪽만 열려있기 때문에 블럭을 넣는곳과 빼는 곳이 같다.

![image](https://github.com/kihyyyun/TIL/assets/126649641/843105fd-5fec-4213-9b36-c9cedd33993f)

1 -> 2- > 3-> 순서대로 넣을수 있다.

넣은 블럭을 빼려면 위에부터 순서대로 빼야한다

![image](https://github.com/kihyyyun/TIL/assets/126649641/c995647e-29c0-4b08-86a8-cda97788d4cc)

이런 자료 구조를 **후입 선출(LIFO, Last In First Out)**이라고 한다.

**큐 구조**

![image](https://github.com/kihyyyun/TIL/assets/126649641/a9a65208-53bd-4d40-98a3-0d8bdf8e5bf6)

이런 자료구조는 각자 필요한 영역이 있는데 선착순 이벤트를 하는데 고객이 대기해야 한다면 큐 자료구조를 사용해야한다.

### 스택 코드 


     public static void main(String[] args) {
        System.out.println("main start");  
        method1(10);
        System.out.println("main end");
    }

    static void method1(int m1) {
        System.out.println("method1 start");
        int cal =m1 * 2;
        method2(cal);
        System.out.println("method1 end");
    }

    static void  method2(int m2){
        System.out.println("method2 start");
        System.out.println("method2 end");
    }


![image](https://github.com/kihyyyun/TIL/assets/126649641/0346ac9c-8592-402e-b496-22d36c8b3cc2)

![image](https://github.com/kihyyyun/TIL/assets/126649641/cdadf974-bb97-4051-8a9e-d290d94164c5)

정리
* 자바는 스택 영역을 사용해서 메서드 호출과 지역 변수를 관리한다.
* 메서드를 계속 호출시 스택은 계속 쌀임
* 지역변수는 스택영역에서 관리한다
* 스택 프레임이 종료시 지역변수도 함께 제거된다
* 스택 프레임이 모두 제거되면 프로그램도 종료
